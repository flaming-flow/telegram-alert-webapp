(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1852,e=>{"use strict";var s=e.i(43476),t=e.i(71645);function a({dict:e}){let[a,r]=(0,t.useState)("phone"),[n,l]=(0,t.useState)(""),[o,c]=(0,t.useState)(""),[i,d]=(0,t.useState)(""),[m,u]=(0,t.useState)(""),[p,x]=(0,t.useState)(""),[h,b]=(0,t.useState)(""),[j,y]=(0,t.useState)(!1),[f,v]=(0,t.useState)(!1),[w,N]=(0,t.useState)(!1);(0,t.useEffect)(()=>{let e=window.Telegram?.WebApp;e?.initData&&N(!0)},[]);let g=async s=>{if(s.preventDefault(),b(""),!n.trim())return void b(e.errors.phoneRequired);if(!n.startsWith("+"))return void b(e.errors.phoneFormat);y(!0);try{let e=await fetch("/api/init",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:n})}),s=await e.json();s.error?b(s.error):(u(s.sessionId),r("code"))}catch{b("Network error. Please try again.")}y(!1)},S=async s=>{if(s.preventDefault(),b(""),!o.trim())return void b(e.errors.codeRequired);y(!0);try{let e=await fetch("/api/code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:m,code:o})}),s=await e.json();s.error?b(s.error):s.needs2FA?r("password"):(x(s.session),r("success"))}catch{b("Network error. Please try again.")}y(!1)},k=async s=>{if(s.preventDefault(),b(""),!i)return void b(e.errors.passwordRequired);y(!0);try{let e=await fetch("/api/password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:m,password:i})}),s=await e.json();s.error?b(s.error):(x(s.session),r("success"))}catch{b("Network error. Please try again.")}y(!1)},T=()=>{switch(a){case"phone":return 1;case"code":case"password":return 2;case"success":return 3}};return(0,s.jsxs)("div",{className:"card p-6 w-full max-w-sm mx-auto",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("h1",{className:"text-xl font-semibold text-[var(--text-primary)] mb-1",children:e.title}),(0,s.jsx)("p",{className:"text-sm text-[var(--text-secondary)]",children:e.subtitle})]}),(0,s.jsx)("div",{className:"flex justify-center gap-2 mb-6",children:[1,2,3].map(e=>(0,s.jsx)("div",{className:`w-2 h-2 rounded-full transition-colors ${e<T()?"bg-green-500":e===T()?"bg-[var(--accent)]":"bg-[var(--bg-tertiary)]"}`},e))}),"success"!==a&&(0,s.jsx)("div",{className:"info-box mb-5 text-sm",children:e.info}),h&&(0,s.jsx)("div",{className:"error-box mb-5",children:h}),"phone"===a&&(0,s.jsxs)("form",{onSubmit:g,children:[(0,s.jsxs)("div",{className:"mb-5",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-[var(--text-secondary)] mb-2",children:e.phone.label}),(0,s.jsx)("input",{type:"tel",value:n,onChange:e=>l(e.target.value),placeholder:e.phone.placeholder,autoFocus:!0}),(0,s.jsx)("p",{className:"hint mt-2",children:e.phone.hint})]}),(0,s.jsxs)("button",{type:"submit",className:"btn-primary w-full",disabled:j,children:[j?(0,s.jsx)("span",{className:"spinner"}):null,e.buttons.sendCode]})]}),"code"===a&&(0,s.jsxs)("form",{onSubmit:S,children:[(0,s.jsxs)("div",{className:"mb-5",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-[var(--text-secondary)] mb-2",children:e.code.label}),(0,s.jsx)("input",{type:"text",value:o,onChange:e=>c(e.target.value),placeholder:e.code.placeholder,maxLength:5,className:"text-center text-xl tracking-[0.3em]",autoFocus:!0}),(0,s.jsx)("p",{className:"hint mt-2",children:e.code.hint})]}),(0,s.jsxs)("button",{type:"submit",className:"btn-primary w-full",disabled:j,children:[j?(0,s.jsx)("span",{className:"spinner"}):null,e.buttons.verify]})]}),"password"===a&&(0,s.jsxs)("form",{onSubmit:k,children:[(0,s.jsxs)("div",{className:"mb-5",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-[var(--text-secondary)] mb-2",children:e.password.label}),(0,s.jsx)("input",{type:"password",value:i,onChange:e=>d(e.target.value),placeholder:e.password.placeholder,autoFocus:!0}),(0,s.jsx)("p",{className:"hint mt-2",children:e.password.hint})]}),(0,s.jsxs)("button",{type:"submit",className:"btn-primary w-full",disabled:j,children:[j?(0,s.jsx)("span",{className:"spinner"}):null,e.buttons.submit]})]}),"success"===a&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"success-box mb-5 text-center",children:e.success.title}),(0,s.jsx)("label",{className:"block text-sm font-medium text-[var(--text-secondary)] mb-2",children:e.success.sessionLabel}),(0,s.jsx)("div",{className:"bg-[var(--bg-tertiary)] p-3 rounded-lg mb-5 font-mono text-xs break-all max-h-32 overflow-auto text-[var(--text-secondary)]",children:p}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(p),v(!0),setTimeout(()=>v(!1),2e3)},className:"btn-primary w-full",children:f?e.success.copied:e.success.copy}),w&&(0,s.jsx)("button",{onClick:()=>{let e=window.Telegram?.WebApp;e&&p&&(e.sendData(p),e.close())},className:"w-full py-3 px-4 rounded-xl font-medium text-sm text-white transition-all hover:opacity-90",style:{background:"linear-gradient(135deg, #2AABEE 0%, #229ED9 100%)"},children:e.success.sendToBot}),(0,s.jsx)("button",{onClick:()=>{let e=new Blob([p],{type:"text/plain"}),s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download="telegram-session.txt",t.click(),URL.revokeObjectURL(s)},className:"btn-secondary w-full",children:e.success.download})]})]})]})}e.s(["default",()=>a])}]);