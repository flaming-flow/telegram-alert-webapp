{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport type { NextRequest } from 'next/server';\n\nconst locales = ['ru', 'en'];\nconst defaultLocale = 'ru';\n\nfunction getLocale(request: NextRequest): string {\n  // Check for cookie first\n  const cookieLocale = request.cookies.get('NEXT_LOCALE')?.value;\n  if (cookieLocale && locales.includes(cookieLocale)) {\n    return cookieLocale;\n  }\n\n  // Check Accept-Language header\n  const acceptLanguage = request.headers.get('Accept-Language');\n  if (acceptLanguage) {\n    const preferredLocale = acceptLanguage\n      .split(',')\n      .map((lang) => lang.split(';')[0].trim().substring(0, 2))\n      .find((lang) => locales.includes(lang));\n    if (preferredLocale) {\n      return preferredLocale;\n    }\n  }\n\n  return defaultLocale;\n}\n\nexport function middleware(request: NextRequest) {\n  const { pathname } = request.nextUrl;\n\n  // Skip API routes and static files\n  if (\n    pathname.startsWith('/api') ||\n    pathname.startsWith('/_next') ||\n    pathname.startsWith('/favicon') ||\n    pathname.includes('.')\n  ) {\n    return NextResponse.next();\n  }\n\n  // Check if pathname already has locale\n  const pathnameHasLocale = locales.some(\n    (locale) => pathname.startsWith(`/${locale}/`) || pathname === `/${locale}`\n  );\n\n  if (pathnameHasLocale) {\n    return NextResponse.next();\n  }\n\n  // Redirect to locale-prefixed path\n  const locale = getLocale(request);\n  const newUrl = new URL(`/${locale}${pathname}`, request.url);\n\n  return NextResponse.redirect(newUrl);\n}\n\nexport const config = {\n  matcher: ['/((?!api|_next/static|_next/image|favicon.ico).*)'],\n};\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAGA,MAAM,UAAU;IAAC;IAAM;CAAK;AAC5B,MAAM,gBAAgB;AAEtB,SAAS,UAAU,OAAoB;IACrC,yBAAyB;IACzB,MAAM,eAAe,QAAQ,OAAO,CAAC,GAAG,CAAC,gBAAgB;IACzD,IAAI,gBAAgB,QAAQ,QAAQ,CAAC,eAAe;QAClD,OAAO;IACT;IAEA,+BAA+B;IAC/B,MAAM,iBAAiB,QAAQ,OAAO,CAAC,GAAG,CAAC;IAC3C,IAAI,gBAAgB;QAClB,MAAM,kBAAkB,eACrB,KAAK,CAAC,KACN,GAAG,CAAC,CAAC,OAAS,KAAK,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,GAAG,SAAS,CAAC,GAAG,IACrD,IAAI,CAAC,CAAC,OAAS,QAAQ,QAAQ,CAAC;QACnC,IAAI,iBAAiB;YACnB,OAAO;QACT;IACF;IAEA,OAAO;AACT;AAEO,SAAS,WAAW,OAAoB;IAC7C,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ,OAAO;IAEpC,mCAAmC;IACnC,IACE,SAAS,UAAU,CAAC,WACpB,SAAS,UAAU,CAAC,aACpB,SAAS,UAAU,CAAC,eACpB,SAAS,QAAQ,CAAC,MAClB;QACA,OAAO,gMAAY,CAAC,IAAI;IAC1B;IAEA,uCAAuC;IACvC,MAAM,oBAAoB,QAAQ,IAAI,CACpC,CAAC,SAAW,SAAS,UAAU,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,KAAK,aAAa,CAAC,CAAC,EAAE,QAAQ;IAG7E,IAAI,mBAAmB;QACrB,OAAO,gMAAY,CAAC,IAAI;IAC1B;IAEA,mCAAmC;IACnC,MAAM,SAAS,UAAU;IACzB,MAAM,SAAS,IAAI,IAAI,CAAC,CAAC,EAAE,SAAS,UAAU,EAAE,QAAQ,GAAG;IAE3D,OAAO,gMAAY,CAAC,QAAQ,CAAC;AAC/B;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;KAAoD;AAChE"}}]
}